<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Chi tiết hóa đơn</title>
  </head>
  <body>
    <h2>Chi tiết hóa đơn</h2>

    <p>
      <a th:href="@{/invoice}">← Danh sách hóa đơn</a>
    </p>

    <p><b>ID:</b> <span th:text="${invoice.id}"></span></p>
    <p><b>Session:</b> <span th:text="${invoice.roomSession.id}"></span></p>
    <p><b>Tổng tiền:</b> <span th:text="${invoice.totalAmount}"></span></p>
    <p><b>Trạng thái:</b> <span th:text="${invoice.status}"></span></p>

    <div th:if="${invoice.status.name() == 'UNPAID'}">
      <form th:action="@{/payment/vnpay/create}" method="post">
        <input type="hidden" name="invoiceId" th:value="${invoice.id}" />
        <button type="submit">Thanh toán VNPay</button>
      </form>
    </div>

    <div th:if="${invoice.status.name() != 'UNPAID'}">
      <p><b>Paid at:</b> <span th:text="${invoice.paidAt}"></span></p>
      <p><b>VNPay TxnRef:</b> <span th:text="${invoice.vnpTxnRef}"></span></p>
      <p>
        <b>VNPay TransactionNo:</b>
        <span th:text="${invoice.vnpTransactionNo}"></span>
      </p>
    </div>
  </body>
</html>
